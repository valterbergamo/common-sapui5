<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:upload="sap.m.upload"
    xmlns:u="sap.ui.unified"
    xmlns:core="sap.ui.core"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
>
    <Dialog
        id="openDialogAttachment"
        title="Anexar arquivos"
        contentWidth="40%"
    >
        <content>
            <VBox
                class="sapUiSmallMargin"
            >
                <UploadCollection
                    id="UploadCollection"
                    multiple="true"
                    mode="MultiSelect"
                    sameFilenameAllowed="false"
                    showSeparators="true"
                    fileDeleted="onRemoveAttachment"
                    uploadComplete="onUploadComplete"
                    uploadTerminated="onUploadComplete"
                    fileRenamed="onRenameFileAttachment"
                    beforeUploadStarts="onBeforeUploadStarts"
                    uploadUrl="/sap/opu/odata/xcop/FSC_SERVICE_SRV/attachmentSet"
                    items="{
                        path: '/attachmentSet'
                    }"
                    
                >
                    <toolbar>
                        <OverflowToolbar>
                            <Button
                                text="Baixar selecionados"
                                icon="sap-icon://download"
                                press="onDownloadAttahments"
                                enabled="true"
                                type="Emphasized"
                            />

                            <Button
                                text="Remover selecionados"
                                icon="sap-icon://delete"
                                press="onRemoveAttahments"
                                enabled="true"
                                type="Ghost"
                            />

                            <ToolbarSpacer />

                            <Button
                                icon="sap-icon://multiselect-all"
                                press="onSelectAllAttachments"
                                enabled="true"
                                type="Transparent"
                            />

                            <Button
                                icon="sap-icon://multiselect-none"
                                press="onUnselectAllAttachments"
                                enabled="true"
                                type="Transparent"
                            />

                            <Button
                                icon="sap-icon://refresh"
                                press="onRefreshAttachments"
                                enabled="true"
                                visible="false"
                                type="Transparent"
                            />

                            <UploadCollectionToolbarPlaceholder />
                        </OverflowToolbar>
                    </toolbar>

                    <items>
                        <UploadCollectionItem
                            documentId="{FileGuid}"
                            fileName="{Filename}"
                            mimeType="{Mimetype}"
                            url="{Url}"
                        >
                            <!-- <attributes>
                                <ObjectAttribute
                                    title="{title}"
                                    text="{path : 'text', formatter : '.formatAttribute'}"
                                    active="{active}"
                                    press="onAttributePress"
                                />
                            </attributes>
                            <statuses>
                                <ObjectStatus
                                    title="{title}"
                                    text="{text}"
                                    state="{state}"
                                />
                            </statuses> -->
                        </UploadCollectionItem>
                    </items>
                </UploadCollection>

                <!-- <upload:UploadSet
                    id="UploadSet"
                    instantUpload="false"
                    terminationEnabled="true"
                    showIcons="false"
                    multiple="true"
                    
                    uploadUrl="/sap/opu/odata/xcop/WFM_WORKFLOW_SRV/attachmentSet"
                    fileTypes="txt,doc,png,pdf"

                    beforeUploadStarts="onBeforeUploadStarts"
                    afterItemAdded="onAfterItemAdded"
                    uploadCompleted="onUploadComplete"
                    selectionChanged="onOpenAttachment"
                    
                    items="{ path: '/attachmentSet', templateShareable: false }"
                >
                    <upload:items>
                        <upload:UploadSetItem
                            fileName="{Filename}"
                            mediaType="{Mediatype}"
                            url="{Url}"
                            uploadState="{Uploadstate}"
                        >
                            <ObjectAttribute
                                title="Nome do arquivo:"
                                text="{Filename}"
                            />
                            <ObjectAttribute
                                title="Mime type:"
                                text="{Mimetype}"
                            />
                            <ObjectAttribute
                                title="Criado por:"
                                text="{Cname}"
                            />
                            <ObjectAttribute
                                title="Criado em:"
                                text="{Credat}"
                            />
                            <ObjectAttribute
                                title="Hora:"
                                text="{Cretim}"
                            />
                        </upload:UploadSetItem>
                    </upload:items>
                </upload:UploadSet> -->
            </VBox>
        </content>
        <beginButton>
            <Button
                tooltip="Fechar"
                icon="sap-icon://cancel"
                text="Fechar"
                type="Accept"
                press="onCancelDialogAttachment"
            />
        </beginButton>
        <!-- <endButton>
            <Button
                tooltip="Fechar"
                icon="sap-icon://cancel"
                text="Cancelar"
                type="Reject"
                press="onCancelDialogAttachment"
            />
        </endButton> -->
    </Dialog>
</core:FragmentDefinition>
