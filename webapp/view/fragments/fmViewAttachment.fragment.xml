<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:upload="sap.m.upload"
    xmlns:u="sap.ui.unified"
    xmlns:core="sap.ui.core"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
>
    <Dialog
        id="openDialogViewAttachment"
        title="Lista de anexos"
        contentWidth="35%"
    >
        <content>
            <VBox
                class="sapUiSmallMargin"
            >
                <UploadCollection
                    id="UploadCollection"
                    multiple="true"
                    mode="MultiSelect"
                    sameFilenameAllowed="false"
                    fileDeleted="onRemoveAttachment"
                    uploadComplete="onUploadComplete"
                    beforeUploadStarts="onBeforeUploadStarts"
                    uploadUrl="/sap/opu/odata/xcop/FSC_SERVICE_SRV/attachmentSet"
                    items="{
                        path: '/attachmentSet'
                    }"
                    
                >
                    <toolbar>
                        <OverflowToolbar>
                            <Button
                                text="Baixar selecionados"
                                icon="sap-icon://download"
                                press="onDownloadAttahments"
                                enabled="true"
                                type="Emphasized"
                            />

                            <ToolbarSpacer />

                            <Button
                                icon="sap-icon://multiselect-all"
                                press="onSelectAllAttachments"
                                enabled="true"
                                type="Transparent"
                            />

                            <Button
                                icon="sap-icon://multiselect-none"
                                press="onUnselectAllAttachments"
                                enabled="true"
                                type="Transparent"
                            />
                        </OverflowToolbar>
                    </toolbar>

                    <items>
                        <UploadCollectionItem
                            documentId="{Guid}"
                            fileName="{Filename}"
                            mimeType="{Mimetype}"
                            url="{Url}"
                            enableDelete="false"
                            visibleDelete="false"
                            enableEdit="false"
                            visibleEdit="false"
                        />
                    </items>
                </UploadCollection>
            </VBox>
        </content>
        <beginButton>
            <Button
                tooltip="Fechar"
                icon="sap-icon://cancel"
                text="Fechar"
                type="Accept"
                press="onCancelDialogAttachment"
            />
        </beginButton>
    </Dialog>
</core:FragmentDefinition>
